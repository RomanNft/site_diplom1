# Використовуємо офіційний образ Node.js версії 20 з Alpine Linux
FROM node:20-alpine AS builder

# Встановлюємо робочу директорію у контейнері
WORKDIR /app

# Копіюємо файли package.json та package-lock.json до робочої директорії у контейнері
COPY package*.json ./

# Виконуємо встановлення всіх залежностей, включаючи npm
RUN npm install

# Копіюємо всі інші файли з контексту будівництва до робочої директорії у контейнері
COPY . .

# Використовуємо директиву EXPOSE для вказівки порту, який використовується вашим додатком
EXPOSE 80

# Встановлюємо команду, яка буде виконуватись при запуску контейнера
CMD ["npm", "start", "--", "--host", "http://0.0.0.0"]
